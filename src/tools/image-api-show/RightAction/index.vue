<template>
    <div class="left-action">
        <el-button color="#626aef" size="small" plain round @click="dialogFormVisible = true">环境管理</el-button>
        <el-dialog v-model="dialogFormVisible" width="max-content" :show-close="false">
            <div class="env-list">
                <div>
                    <div class="menu-action" @click="drawerLeft = '-60%'">
                        <el-icon class="icon" size="20px" @click.stop="drawerLeft = '0'">
                            <Menu />
                        </el-icon>
                    </div>
                </div>
                <div class="left" :style="{ left: drawerLeft }">
                    <div class="title">全局</div>
                    <div class="item" :class="currentTab === 'globalParameters' ? 'active' : ''"
                        @click="changeTab('globalParameters')">
                        <div class="icon" style="background-color:rgba(34, 162, 255, 0.1)">
                            <svg t="1747156150515" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" width="1em" height="1em">
                                <path
                                    d="M733.472114 529.572214c-50.067302 0-90.802052 40.735773-90.802052 90.803076 0 50.073442 40.73475 90.809215 90.802052 90.809215 50.067302 0 90.802052-40.73475 90.802052-90.809215 0-50.067302-40.73475-90.803076-90.802052-90.803076z m0 116.025527c-13.904685 0-25.216311-11.317767-25.216311-25.222451s11.311627-25.216311 25.216311-25.216312 25.216311 11.311627 25.216311 25.216312-11.311627 25.222451-25.216311 25.222451z"
                                    fill="#22a2ff"></path>
                                <path
                                    d="M953.904549 576.939011c-2.431376-12.700253-10.146081-20.866237-19.515473-20.685111h-1.950421c-32.275077 0-58.546418-25.970488-58.546418-57.856709 0-10.509355 5.043876-22.038946 5.105275-22.128997 4.913916-11.334139 1.173732-24.562419-8.946766-31.643697l-0.568959-0.390903-56.295144-30.925337-0.60375-0.270153a29.839609 29.839609 0 0 0-31.912827 6.275937c-6.846942 7.02602-28.523637 25.220405-46.028313 25.220405-17.654079 0-39.4812-18.556635-46.355771-25.701359a29.732162 29.732162 0 0 0-31.887244-6.547113l-0.630357 0.270153-58.279335 31.645744-0.568958 0.391926c-10.131755 7.073092-13.884218 20.304442-8.977465 31.645745 0.061398 0.119727 5.106298 11.648294 5.106298 22.157649 0 31.915897-26.273387 57.856709-58.548464 57.856709h-1.950422c-9.42772-0.181125-17.111726 7.955182-19.546172 20.685111-0.210801 0.991584-4.713348 24.860201-4.713348 43.62559 0 18.795065 4.502547 42.634006 4.713348 43.62559 2.400676 12.549827 9.936303 20.687158 19.184945 20.687158l0.361227-0.029676h1.950422c32.275077 0 58.548464 25.998117 58.548464 57.884339 0 10.509355-5.0449 22.038946-5.074576 22.12695-4.920056 11.332093-1.209548 24.558325 8.884345 31.67542l0.51063 0.391926 55.244208 30.534434 0.600681 0.270152a29.15911 29.15911 0 0 0 32.005948-6.635117c6.485715-6.996344 29.031197-26.842345 47.078225-26.842345 18.163685 0 40.381709 19.727297 47.37703 27.322276a29.068036 29.068036 0 0 0 21.286816 8.977465c3.648087 0.040932 7.268544-0.676405 10.629081-2.102894l0.630357-0.238431 57.258075-31.28554 0.599657-0.421602c10.115382-7.071046 13.854543-20.288069 8.946766-31.615045-0.062422-0.119727-5.106298-11.618619-5.106298-22.157649 0-31.915897 26.27134-57.884338 58.548464-57.884339h1.950422c9.367345 0.207731 17.083074-7.928576 19.515473-20.657482 0.210801-0.991584 4.715395-24.830525 4.715395-43.62559 0.001023-18.765389-4.503571-42.634006-4.745071-43.62559z m-58.193377 50.946323c-48.900733 15.521508-84.408435 61.144592-84.408435 114.852818 0 4.843308 0.379647 9.577123 1.00284 14.066367l-6.776334 3.694135c-17.222243-13.552667-43.335994-28.866445-73.228815-28.866445-29.245068 0-55.187927 15.020088-72.409146 28.291347l-5.235235-2.886747c0.636496-4.574179 1.01512-9.369392 1.01512-14.298657 0-53.720505-35.519981-99.354845-84.432994-114.852818-0.195451-2.617617-0.318248-5.100158-0.318249-7.314593 0-2.225691 0.122797-4.721535 0.318249-7.351432 48.913013-15.496949 84.432994-61.120033 84.432994-114.828258 0-4.818749-0.379647-9.515724-0.99056-13.980409l8.39111-4.561899c17.160845 12.989849 42.650379 27.313066 71.565943 27.313065 28.535917 0 53.745065-13.931291 70.807672-26.65201l6.862291 3.76679c-0.672312 4.831029-1.039679 9.589402-1.039679 14.115486 0 53.720505 35.519981 99.331309 84.445274 114.828259 0.195451 2.617617 0.318248 5.124717 0.318249 7.351431-0.002047 2.213411-0.124843 4.708232-0.320295 7.31357zM98.142228 239.922325h34.187636c13.623275 39.977503 51.54291 68.812225 96.072079 68.812225s82.448804-28.834722 96.07208-68.812225h468.954624c18.113543 0 32.79287-14.680351 32.792871-32.792871 0-18.113543-14.680351-32.79287-32.792871-32.79287H324.373739c-13.707187-39.828101-51.54905-68.526723-95.970772-68.526723s-82.264609 28.697599-95.971795 68.526723h-34.288944c-18.113543 0-32.79287 14.680351-32.792871 32.79287s14.679327 32.79287 32.792871 32.792871z m130.259715-68.526723c19.813255 0 35.876092 16.062837 35.876092 35.876092 0 19.814278-16.061814 35.876092-35.876092 35.876092s-35.876092-16.061814-35.876092-35.876092c0-19.813255 16.062837-35.876092 35.876092-35.876092zM445.781856 476.82078h-28.889981c-13.614066-39.993876-51.54291-68.842924-96.082312-68.842925-44.540426 0-82.468247 28.849048-96.082312 68.842925H98.142228c-18.113543 0-32.79287 14.680351-32.792871 32.79287 0 18.113543 14.680351 32.79287 32.792871 32.79287h126.706796c13.715373 39.812751 51.54905 68.496024 95.960539 68.496024 44.411489 0 82.245166-28.683273 95.960539-68.496024h29.011754c18.113543 0 32.79287-14.680351 32.79287-32.79287 0.001023-18.11252-14.679327-32.79287-32.79287-32.79287z m-124.972293 68.497047c-19.813255 0-35.876092-16.062837-35.876092-35.876092 0-19.814278 16.062837-35.876092 35.876092-35.876093s35.876092 16.062837 35.876092 35.876093-16.061814 35.876092-35.876092 35.876092zM445.781856 783.65505h-92.579535c-13.746072-39.757492-51.551096-68.390623-95.9237-68.390623-44.37158 0-82.177628 28.633131-95.9237 68.390623h-63.213717c-18.113543 0-32.79287 14.680351-32.79287 32.79287 0 18.113543 14.680351 32.79287 32.79287 32.792871h63.017243c13.583366 40.048111 51.53984 68.948325 96.120174 68.948325 44.579311 0 82.536808-28.900214 96.120175-68.948325h92.38306c18.113543 0 32.79287-14.680351 32.79287-32.792871 0.001023-18.11252-14.679327-32.79287-32.79287-32.79287z m-188.502212 68.948325c-19.813255 0-35.876092-16.062837-35.876092-35.876092s16.062837-35.876092 35.876092-35.876092 35.876092 16.062837 35.876092 35.876092c0 19.814278-16.062837 35.876092-35.876092 35.876092z"
                                    fill="#22a2ff"></path>
                            </svg>
                        </div>
                        <div>全局参数</div>
                    </div>
                    <div class="item" :class="currentTab === 'globalVariable' ? 'active' : ''"
                        @click="changeTab('globalVariable')">
                        <div class="icon" style="background-color:rgba(175, 113, 255, 0.1)">
                            <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                                width="1em" height="1em">
                                <path
                                    d="M187.684571 841.142857h38.144v-43.556571H208.091429c-38.802286 0-49.005714-17.042286-49.005715-64.694857 0-44.251429 4.059429-83.748571 4.059429-134.107429 0-51.712-14.262857-76.214857-49.700572-85.065143v-3.437714c35.401143-8.850286 49.737143-32.658286 49.737143-85.065143 0-50.395429-4.096-89.856-4.096-134.107429 0-47.652571 10.203429-65.353143 49.005715-65.353142h17.700571V182.857143H187.684571c-63.268571 0-91.904 23.808-91.904 104.155428 0 55.149714 6.838857 91.904 6.838858 142.957715 0 27.904-14.299429 57.197714-66.048 57.856v47.652571c51.748571 0.694857 66.048 29.988571 66.048 59.245714 0 50.358857-6.838857 87.113143-6.838858 142.262858 0 80.347429 28.598857 104.155429 91.904 104.155428z m173.202286-116.406857h77.604572v-265.508571c33.353143-33.353143 57.197714-51.053714 91.904-51.053715 44.251429 0 63.305143 25.892571 63.305142 90.550857v226.011429h78.299429v-235.52c0-95.341714-35.401143-148.406857-115.053714-148.406857-51.053714 0-89.161143 27.904-123.904 61.257143h-2.011429l-6.144-51.748572h-64v374.418286zM802.304 841.142857v-43.556571h17.700571c38.802286 0 49.005714-17.042286 49.005715-64.694857 0-44.251429-3.364571-83.748571-3.364572-134.107429 0-51.712 13.604571-76.214857 49.005715-85.065143v-3.437714c-35.401143-8.850286-49.005714-32.658286-49.005715-85.065143 0-50.395429 3.401143-89.856 3.401143-134.107429 0-47.652571-10.24-65.353143-49.005714-65.353142h-17.737143V182.857143h38.144c63.268571 0 92.562286 23.808 92.562286 104.155428 0 55.149714-6.802286 91.904-6.802286 142.957715 0 27.904 14.299429 57.197714 65.353143 57.856v47.652571c-51.053714 0.694857-65.353143 29.988571-65.353143 59.245714 0 50.358857 6.802286 87.113143 6.802286 142.262858 0 80.347429-29.257143 104.155429-92.562286 104.155428h-38.144z"
                                    fill="#b071ff"></path>
                            </svg>
                        </div>
                        <div>全局变量</div>
                    </div>
                    <div style="margin-top: 20px;" class="title">内置</div>
                    <div class="item" :class="currentTab === 'internalVariable' ? 'active' : ''"
                        @click="changeTab('internalVariable')">
                        <div class="icon" style="background-color:rgba(127, 197, 255, 0.2);fill:#067ced">
                            <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                                width="1em" height="1em">
                                <path
                                    d="M403.9 625v-35.7c57.5-31.3 83.8-94.4 78.8-189.5V396h-97.5v322.7h-60.1V354.9h157.6V293h60.1v61.9h157.6v288.9c1.2 48.8-23.8 72.5-75.1 71.3H584v-37.5h26.3c21.3 0 31.3-10.6 30-31.9V396.2h-97.6v3.8c-3.8 93.8 23.1 157 80.7 189.5v35.7c-52.5-20-89.5-50.7-110.7-92-22.4 43.7-58.7 74.3-108.8 91.8z">
                                </path>
                                <path
                                    d="M805.4 217.7C727.6 139.8 622 96.1 512 96.1s-215.6 43.7-293.4 121.6c-162 162-162 424.9 0 587C296.4 882.5 402 926.3 512 926.3s215.6-43.7 293.4-121.6c162.1-162.2 162.1-425 0-587z m-38.7 548.2A359.88 359.88 0 0 1 512 871.5c-95.5 0-187.1-37.9-254.8-105.6-140.5-140.5-140.5-369 0-509.5 67.5-67.5 159.2-105.6 254.8-105.6 95.5 0 187.2 37.9 254.8 105.6 140.4 140.5 140.4 369.1-0.1 509.5z">
                                </path>
                            </svg>
                        </div>
                        <div>内置变量</div>
                    </div>
                </div>
                <div class="right" @click="drawerLeft = '-60%'">
                    <GlobalParametersView v-if="currentTab === 'globalParameters'"></GlobalParametersView>
                    <GlobalVariableView v-if="currentTab === 'globalVariable'"></GlobalVariableView>
                    <InternalVariable v-if="currentTab === 'internalVariable'"></InternalVariable>
                </div>
            </div>
        </el-dialog>
    </div>
</template>

<script setup>
import { ref } from 'vue';
import { Menu } from '@element-plus/icons-vue';
import GlobalParametersView from './GlobalParametersView.vue';
import GlobalVariableView from './GlobalVariableView.vue';
import InternalVariable from './InternalVariable.vue';

const drawerLeft = ref('-60%')
const currentTab = ref('globalParameters')
const dialogFormVisible = ref(false)

function changeTab(tab) {
    currentTab.value = tab
}

</script>

<style scoped>
.env-list {
    display: flex;
    position: relative;
    height: 60vh;
    width: 60vw;
    overflow: hidden;
}

.left-action {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: 10px;
    width: 100%;
    height: 100%;
}

.left-action :deep(.el-dialog) {
    padding: 0;
}

.left-action :deep(.el-dialog__header) {
    padding: 0;
}

.left {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: 20px 16px;
    border-radius: 4px 0px 0px 4px;
    background-color: #F6F8FA;

    & .title {
        font-size: 13px;
        color: #767676;
        margin-bottom: 5px;
    }

    & .item {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        border-radius: 5px;
        padding: 5px 10px;
        margin: 5px 0;
        min-width: 180px;
        gap: 10px;
        cursor: pointer;
        user-select: none;

        &:hover {
            background-color: rgba(250, 140, 22, 0.05);
        }

        &.active {
            color: #fa8c16;
            background-color: rgba(250, 140, 22, 0.05);
        }
    }

    & .icon {
        flex-direction: row;
        align-items: center;
        justify-content: center;
        display: flex;
        width: 20px;
        height: 20px;
        border-radius: 4px;
        padding: 1px;
    }
}

.right {
    padding: 20px 16px;
    width: 100%;
    gap: 10px;
    overflow-y: auto;

    & :deep(h3),
    & :deep(.tip) {
        margin-bottom: 10px;
    }
}

.menu-action {
    display: none;
}

@media screen and (max-width: 768px) {
    .env-list {
        flex-direction: column;
        width: 90vw;
    }

    .left {
        width: 60%;
        height: 100%;
        position: absolute;
        z-index: 10;
        transition: all 0.3s;
    }

    .right {
        width: 100%;
        height: calc(100% - 40px);
    }

    .menu-action {
        height: 40px;
        display: flex;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        padding: 10px 16px;

        & .icon:hover {
            color: #fa8c16;
        }
    }
}
</style>